<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MWF Ltd - Generate Receipt</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/public/css/receipt.css">
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h2>Mayondo Wood & Furniture Ltd</h2>
            </div>
            
            <ul class="nav-links">
                <li><a href="salesAgent.html"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="sales.html"><i class="fas fa-cash-register"></i> Record Sale</a></li>
                <li class="active"><a href="receipt.html"><i class="fas fa-receipt"></i> Receipt</a></li>
                <li><a href="invoice.html"><i class="fas fa-file-invoice-dollar"></i> Invoices</a></li>
                <!-- <li><a href="#"><i class="fas fa-boxes"></i> Inventory Check</a></li>
                <li><a href="#"><i class="fas fa-users"></i> Customers</a></li> -->

            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <h1>Generate Receipt</h1>
                <div class="user-info">
                    <div>
                        <h3>Mugerwa Rollins</h3>
                        <p>Sales Attendant</p>
                    </div>
                    <img src="/public/imgs/salesAgent.jpg" alt="User">
                </div>
            </div>

            <!-- Receipt Container -->
            <div class="receipt-container">
                <div class="receipt-header">
                    <h2>Sales Receipt</h2>
                    <p>Official proof of purchase</p>
                </div>

                <!-- Company Information -->
                <div class="company-info">
                    <h3>Mayondo Wood and Furniture (MWF) Ltd</h3>
                    <p>123 Timber Avenue, Forestville</p>
                    <p>Phone: +1 (555) 123-4567 | Email: info@mwf.com</p>
                    <p>VAT Number: VAT-123456789</p>
                </div>

                <!-- Receipt Details -->
                <div class="receipt-details">
                    <div>
                        <div class="detail-section">
                            <h4>Receipt Information</h4>
                            <div class="detail-row">
                                <span class="detail-label">Receipt Number:</span>
                                <span class="detail-value" id="receiptNumber">RC-2023-0085</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Date Issued:</span>
                                <span class="detail-value" id="receiptDate">November 15, 2023</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Time:</span>
                                <span class="detail-value" id="receiptTime">10:24 AM</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Sales Agent:</span>
                                <span class="detail-value" id="salesAgent">Sarah Johnson</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <div class="detail-section">
                            <h4>Customer Information</h4>
                            <div class="detail-row">
                                <span class="detail-label">Customer Name:</span>
                                <span class="detail-value" id="customerName">BuildIT Constructions</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Contact Person:</span>
                                <span class="detail-value" id="customerContact">Robert Johnson</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Phone:</span>
                                <span class="detail-value" id="customerPhone">+1 (555) 987-6543</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Address:</span>
                                <span class="detail-value" id="customerAddress">123 Construction Ave, Buildington</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Items Table -->
                <table class="receipt-items">
                    <thead>
                        <tr>
                            <th width="40%">Product Description</th>
                            <th width="15%">Quantity</th>
                            <th width="15%">Unit Price ($)</th>
                            <th width="15%">Discount</th>
                            <th width="15%">Total ($)</th>
                        </tr>
                    </thead>
                    <tbody id="receiptItems">
                        <tr>
                            <td>Mahogany Timber Plank (Premium Grade)</td>
                            <td>20</td>
                            <td>$125.00</td>
                            <td>$0.00</td>
                            <td>$2,500.00</td>
                        </tr>
                        <tr>
                            <td>Oak Wood Beam (4x4x8 ft)</td>
                            <td>10</td>
                            <td>$85.50</td>
                            <td>$0.00</td>
                            <td>$855.00</td>
                        </tr>
                        <tr>
                            <td>Teak Hardwood Planks</td>
                            <td>15</td>
                            <td>$95.00</td>
                            <td>$142.50</td>
                            <td>$1,282.50</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Summary Section -->
                <div class="receipt-summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="subtotalAmount">$4,637.50</span>
                    </div>
                    <div class="summary-row">
                        <span>Transport Fee (5%):</span>
                        <span id="transportFee">$231.88</span>
                    </div>
                    <div class="summary-row">
                        <span>Tax (VAT 10%):</span>
                        <span id="taxAmount">$463.75</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total Amount:</span>
                        <span id="totalAmount">$5,333.13</span>
                    </div>
                </div>

                <!-- Payment Information -->
                <div class="detail-section" style="margin-top: 30px;">
                    <h4>Payment Information</h4>
                    <div class="detail-row">
                        <span class="detail-label">Payment Method:</span>
                        <span class="detail-value" id="paymentMethod">Bank Transfer</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment Status:</span>
                        <span class="detail-value" id="paymentStatus" style="color: var(--success); font-weight: bold;">Paid</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Transaction Reference:</span>
                        <span class="detail-value" id="transactionRef">TRX-20231115-0085</span>
                    </div>
                </div>

                <!-- Terms and Conditions -->
                <div class="detail-section" style="margin-top: 30px;">
                    <h4>Terms & Conditions</h4>
                    <p style="color: var(--gray); font-size: 14px; line-height: 1.5;">
                        Goods sold are not returnable unless defective. Warranty claims must be made within 30 days of purchase. 
                        Transport fee applies if delivery service is provided by MWF Ltd. Receipt must be presented for any claims.
                    </p>
                </div>

                <!-- Thank You Message -->
                <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
                    <h3 style="color: var(--primary);">Thank You for Your Business!</h3>
                    <p style="color: var(--gray);">We appreciate your trust in MWF Ltd</p>
                </div>

                <!-- Actions -->
                <div class="receipt-actions">
                    <button class="btn btn-outline" onclick="window.history.back()">
                        <i class="fas fa-arrow-left"></i> Back to Sales
                    </button>
                    <button class="btn btn-primary" onclick="printReceipt()">
                        <i class="fas fa-print"></i> Print Receipt
                    </button>
                    <button class="btn btn-success" onclick="emailReceipt()">
                        <i class="fas fa-envelope"></i> Email Receipt
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set current date and time
        function setCurrentDateTime() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('receiptDate').textContent = now.toLocaleDateString('en-US', options);
            document.getElementById('receiptTime').textContent = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            
            // Generate receipt number (in a real app, this would come from the server)
            const receiptNumber = 'RC-' + now.getFullYear() + '-' + String(now.getMonth() + 1).padStart(2, '0') + '-' + String(Math.floor(Math.random() * 1000)).padStart(4, '0');
            document.getElementById('receiptNumber').textContent = receiptNumber;
            
            // Generate transaction reference
            const transactionRef = 'TRX-' + now.getFullYear() + String(now.getMonth() + 1).padStart(2, '0') + String(now.getDate()).padStart(2, '0') + '-' + String(Math.floor(Math.random() * 1000)).padStart(4, '0');
            document.getElementById('transactionRef').textContent = transactionRef;
        }
        
        // Calculate totals (in a real app, this would come from the sales data)
        function calculateTotals() {
            // These values would normally come from the completed sale
            const subtotal = 4637.50;
            const transportFee = subtotal * 0.05;
            const tax = subtotal * 0.10;
            const total = subtotal + transportFee + tax;
            
            document.getElementById('subtotalAmount').textContent = '$' + subtotal.toFixed(2);
            document.getElementById('transportFee').textContent = '$' + transportFee.toFixed(2);
            document.getElementById('taxAmount').textContent = '$' + tax.toFixed(2);
            document.getElementById('totalAmount').textContent = '$' + total.toFixed(2);
        }
        
        // Print receipt function
        function printReceipt() {
            window.print();
        }
        
        // Email receipt function
        function emailReceipt() {
            const customerEmail = prompt('Enter customer email address:', 'customer@example.com');
            if (customerEmail) {
                // In a real application, this would send the receipt via email
                alert(`Receipt has been sent to ${customerEmail}`);
            }
        }
        
        // Load receipt data from URL parameters (simulated)
        function loadReceiptData() {
            // In a real application, this would load data from the completed sale
            // For demo purposes, we're using static data
            const urlParams = new URLSearchParams(window.location.search);
            const saleId = urlParams.get('saleId');
            
            if (saleId) {
                // This would fetch sale data from the server in a real application
                document.getElementById('receiptNumber').textContent = 'RC-' + saleId;
            }
            
            // Simulate loading customer data
            setTimeout(() => {
                // Data would come from the server in a real application
                document.getElementById('customerName').textContent = 'BuildIT Constructions';
                document.getElementById('customerContact').textContent = 'Robert Johnson';
                document.getElementById('customerPhone').textContent = '+1 (555) 987-6543';
                document.getElementById('customerAddress').textContent = '123 Construction Ave, Buildington';
                document.getElementById('salesAgent').textContent = 'Sarah Johnson';
                document.getElementById('paymentMethod').textContent = 'Bank Transfer';
            }, 100);
        }
        
        // Initialize the receipt
        document.addEventListener('DOMContentLoaded', function() {
            setCurrentDateTime();
            calculateTotals();
            loadReceiptData();
        });
    </script>
</body>
</html>