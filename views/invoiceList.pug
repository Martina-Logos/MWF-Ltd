meta(charset="UTF-8")
meta(name="viewport", content="width=device-width, initial-scale=1")
title MWF Ltd - Invoices
link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css")
link(rel="stylesheet", href="/css/invoiceList.css")

.container
  .sidebar
    .logo
      h2 Mayondo Wood & Furniture Ltd
    ul.nav-links
      li
        a(href="/salesAgent")
          i.fas.fa-home
          | Dashboard
      li
        a(href="/invoice")
          i.fas.fa-file-invoice-dollar
          | Create Invoice
      li.active
        a(href="/invoiceList")
          i.fas.fa-list
          | Invoice List

  .main-content
    .header
      h1 All Invoices
      .user-info
        div
          h3= currentUser.name || 'User'
          p Sales Attendant
        if currentUser.profileImage
          img(src=currentUser.profileImage, alt="User")

    if invoices && invoices.length > 0
      .invoice-table
        table
          thead
            tr
              th Invoice #
              th Customer
              th Date
              th Total
              th Actions
          tbody
            each invoice in invoices
              tr
                td= invoice.invoiceNumber
                td= invoice.customerName
                td= invoice.invoiceDate.toLocaleDateString()
                td= "UGX " + invoice.total.toLocaleString('en-UG', { minimumFractionDigits: 2 })
                td.actions
                  a.btn.btn-edit(href=`/invoice/edit/${invoice._id}` title="Edit Invoice")
                    i.fas.fa-edit
                    | Edit
                  form.delete-form(action=`/invoice/delete/${invoice._id}` method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this invoice?');")
                    button.btn.btn-delete(type="submit" title="Delete Invoice")
                      i.fas.fa-trash
                      | Delete
    else
      .empty-state
        i.fas.fa-inbox(style="font-size: 3rem; color: #ccc;")
        p No invoices found.
        a.btn.btn-primary(href="/invoice")
          i.fas.fa-plus
          | Create First Invoice