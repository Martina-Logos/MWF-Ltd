meta(charset="UTF-8")
meta(name="viewport", content="width=device-width,initial-scale=1")
title MWF Ltd - Orders List
link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css")
link(rel="stylesheet", href="/css/orderList.css")

.container
  // Sidebar
  .sidebar
    .logo
      h2 Mayondo Wood & Furniture Ltd
    ul.nav-links
      li
        a(href="/manager")
          i.fas.fa-home
          |  Dashboard
      li
        a(href="/orderStock")
          i.fas.fa-boxes
          |  Order Stock
      li.active
        a(href="/orderList")
          i.fas.fa-truck
          |  Order List
      li
        a(href="/user")
          i.fas.fa-users
          |  Users

  // Main Content
  .main-content
    // Header
    .header
      h1 Purchase Orders
      .user-info
        div
          h3 Tee Mwangi
          p Manager
        img(src="/imgs/Beauty.png", alt="User")

    // Table Container
    .stock-table-container
      h2 Order List

      if orders && orders.length
        table.stock-table
          thead
            tr
              th Products
              th Supplier
              th Order Date
              th Expected Delivery
              th Payment Terms
              th Total (shs)
              th Status
              th Actions
          tbody
            each order in orders
              tr
                // Products column
                td
                  if order.items && order.items.length
                    ul
                      each item in order.items
                        li #{item.product} x #{item.quantity} = shs#{item.total.toLocaleString()}
                  else
                    | -
                // Supplier
                td= order.supplier || "-"
                // Dates
                td= new Date(order.orderDate).toLocaleDateString()
                td= order.expectedDate ? new Date(order.expectedDate).toLocaleDateString() : "-"
                td= order.paymentTerms
                td= "shs" + order.orderTotal.toLocaleString()
                // Status
                td
                  if order.status === "Delivered"
                    span.status.delivered Delivered
                  else if order.status === "Pending"
                    span.status.pending Pending
                  else
                    span.status.processing Processing
                // Actions
                td
                  a.btn.btn-view(href=`/orderStock/view/${order._id}`)
                    i.fas.fa-eye
                    |  View
                  a.btn.btn-edit(href=`/orderStock/edit/${order._id}`)
                    i.fas.fa-edit
                    |  Edit
                  form(action=`/orderStock/delete/${order._id}`, method="POST", style="display:inline;")
                    button.btn.btn-delete(type="submit", onclick="return confirm('Are you sure you want to delete this order?');")
                      i.fas.fa-trash
                      |  Delete
      else
        p.no-orders No purchase orders available.
